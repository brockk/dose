<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get an object to fit the mTPI-2 dose-finding model. — get_mtpi2 • escalation</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Get an object to fit the mTPI-2 dose-finding model. — get_mtpi2" />
<meta property="og:description" content="The modified toxicity probability interval 2 (mTPI-2) is a dose-escalation
design by Guo et al. As the name suggests, it is an adaptation of the mTPI
design." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">escalation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/A100-DoseSelectors.html">Using escalation</a>
    </li>
    <li>
      <a href="../articles/A205-CRM.html">Continual Reassessment Method</a>
    </li>
    <li>
      <a href="../articles/A207-NBG.html">Neuenschwander, Branson &amp; Gsponer</a>
    </li>
    <li>
      <a href="../articles/A210-TPI.html">Toxicity Probability Interval Design</a>
    </li>
    <li>
      <a href="../articles/A220-mTPI.html">Modified Toxicity Probability Interval Design</a>
    </li>
    <li>
      <a href="../articles/A230-BOIN.html">Bayesian Optimal Interval Design</a>
    </li>
    <li>
      <a href="../articles/A600-DosePaths.html">Working with dose-paths</a>
    </li>
    <li>
      <a href="../articles/A700-Simulation.html">Simulating dose-escalation trials</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get an object to fit the mTPI-2 dose-finding model.</h1>
    
    <div class="hidden name"><code>get_mtpi2.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The modified toxicity probability interval 2 (mTPI-2) is a dose-escalation
design by Guo et al. As the name suggests, it is an adaptation of the mTPI
design.</p>
    </div>

    <pre class="usage"><span class='fu'>get_mtpi2</span><span class='op'>(</span>
  parent_selector_factory <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>num_doses</span>,
  <span class='va'>target</span>,
  <span class='va'>epsilon1</span>,
  <span class='va'>epsilon2</span>,
  <span class='va'>exclusion_certainty</span>,
  alpha <span class='op'>=</span> <span class='fl'>1</span>,
  beta <span class='op'>=</span> <span class='fl'>1</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>parent_selector_factory</th>
      <td><p>Object of type <code><a href='selector_factory.html'>selector_factory</a></code>.</p></td>
    </tr>
    <tr>
      <th>num_doses</th>
      <td><p>Number of doses under investigation.</p></td>
    </tr>
    <tr>
      <th>target</th>
      <td><p>We seek a dose with this probability of toxicity.</p></td>
    </tr>
    <tr>
      <th>epsilon1</th>
      <td><p>This parameter determines the lower bound of the
equivalence interval. See Details.</p></td>
    </tr>
    <tr>
      <th>epsilon2</th>
      <td><p>This parameter determines the upper bound of the
equivalence interval. See Details.</p></td>
    </tr>
    <tr>
      <th>exclusion_certainty</th>
      <td><p>Numeric, threshold posterior certainty required to
exclude a dose for being excessively toxic. The authors discuss values in the
range 0.7 - 0.95. Set to a value &gt; 1 to suppress the dose exclusion
mechanism. The authors use the Greek letter xi for this parameter.</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>First shape parameter of the beta prior distribution on the
probability of toxicity.</p></td>
    </tr>
    <tr>
      <th>beta</th>
      <td><p>Second shape parameter of the beta prior distribution on the
probability of toxicity.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Extra args are passed onwards.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>an object of type <code><a href='selector_factory.html'>selector_factory</a></code> that can fit the
mTPI-2 model to outcomes.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    

<p>The design seeks a dose with probability of toxicity \(p_{i}\)
close to a target probability \(p_{T}\) by iteratively calculating the
interval $$p_{T} - \epsilon_{1} &lt; p_{i} &lt; p_{T} + \epsilon_{2}$$
In this model, \(\epsilon_{1}\) and \(\epsilon_{2}\) are specified
constants. \(p_{i}\) is estimated by a Bayesian beta-binomial conjugate
model $$p_{i} | data \sim Beta(\alpha + x_{1}, \beta + n_{i} - x_{i}),$$
where \(x_{i}\) is the number of toxicities observed and \(n_{i}\) is the
number of patients treated at dose \(i\), and \(\alpha\) and \(\beta\)
are hyperparameters for the beta prior on \(p_{i}\).
A dose is excluded as inadmissible if
$$P(p_{i} &gt; p_{T} | data) &gt; \xi$$
The trial commences at a starting dose, possibly dose 1. If dose \(i\)
has just been evaluated in patient(s), dose selection decisions proceed by
calculating the unit probability mass of the true toxicity rate at dose
\(i\) using the partition of the probability space into subintervals with
equal length given by\((\epsilon_{1} + \epsilon_{2})\). \(EI\) is the
equivalence interval \(p_{T} - epsilon_{1}, p_{T} - epsilon_{2}\), with
\(LI\) the set of all intervals below, and \(HI\) the set of all
intervals above.
The unit probability mass (UPM) of an interval is the posterior probability
that the true toxicity rate belongs to the interval divided by the width of
the interval. The interval with maximal UPM determines the recommendation for
the next patient(s), with the intervals corresponding to decisions to
escalate, stay, and de-escalate dose, respectively. Further to this are rules
that prevent escalation to an inadmissible dose.
In the original mTPI paper, the authors demonstrate acceptable operating
performance using \(\alpha = \beta = 1\), \(K_{1} = 1\),
\(K_{2} = 1.5\) and  \(\xi = 0.95\).
The authors of the mTPI-2 approach show desirable performance as compared
to the original mTPI method, under particular parameter choices.
See the publications for full details.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Ji, Y., Liu, P., Li, Y., &amp; Bekele, B. N. (2010).
 A modified toxicity probability interval method for dose-finding trials.
 Clinical Trials, 7(6), 653–663. https://doi.org/10.1177/1740774510382799</p>
<p>Ji, Y., &amp; Yang, S. (2017).
On the Interval-Based Dose-Finding Designs, 1–26.
Retrieved from https://arxiv.org/abs/1706.03277</p>
<p>Guo, W., Wang, SJ., Yang, S., Lynn, H., Ji, Y. (2017).
A Bayesian Interval Dose-Finding Design Addressing Ockham's Razor: mTPI-2.
https://doi.org/10.1016/j.cct.2017.04.006</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>target</span> <span class='op'>&lt;-</span> <span class='fl'>0.25</span>
<span class='va'>model1</span> <span class='op'>&lt;-</span> <span class='fu'>get_mtpi2</span><span class='op'>(</span>num_doses <span class='op'>=</span> <span class='fl'>5</span>, target <span class='op'>=</span> <span class='va'>target</span>, epsilon1 <span class='op'>=</span> <span class='fl'>0.05</span>,
  epsilon2 <span class='op'>=</span> <span class='fl'>0.05</span>, exclusion_certainty <span class='op'>=</span> <span class='fl'>0.95</span><span class='op'>)</span>

<span class='va'>outcomes</span> <span class='op'>&lt;-</span> <span class='st'>'1NNN 2NTN'</span>
<span class='va'>model1</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fit.html'>fit</a></span><span class='op'>(</span><span class='va'>outcomes</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='recommended_dose.html'>recommended_dose</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 1</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Kristian Brock.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


